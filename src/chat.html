<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

<style>
/* ================= UI VARIABLES ================= */
:root {
  --bg: #ffffff;
  --panel: #f0f2f5;
  --border: #ddd;
  --text: #000;
}
body.dark {
  --bg: #111b21;
  --panel: #202c33;
  --border: #2a3942;
  --text: #e9edef;
}

* { box-sizing: border-box; }
body {
  margin: 0;
  font-family: Arial, Helvetica, sans-serif;
  background: var(--bg);
  color: var(--text);
}

/* ================= LAYOUT ================= */
#app {
  display: flex;
  height: 100vh;
}

/* ===== SIDEBAR ===== */
#sidebar {
  width: 300px;
  background: var(--panel);
  border-right: 1px solid var(--border);
  display: flex;
  flex-direction: column;
}

/* Sidebar header */
#sidebar-header {
  height: 48px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 12px;
  border-bottom: 1px solid var(--border);
  font-weight: bold;
}

/* 3-dot menu */
#menu {
  position: relative;
  cursor: pointer;
}
#menu-panel {
  display: none;
  position: absolute;
  right: 0;
  top: 24px;
  background: var(--bg);
  border: 1px solid var(--border);
  padding: 8px;
  font-size: 14px;
}
#menu-panel button {
  background: none;
  border: none;
  color: var(--text);
  cursor: pointer;
}

/* Roster stays same ID */
#roster {
  flex: 1;
  overflow-y: auto;
  padding: 8px;
  font-weight: bold;
}

/* ===== CHAT AREA ===== */
#chat-area {
  flex: 1;
  display: flex;
  flex-direction: column;
}

#chatlog {
  flex: 1;
  overflow-y: auto;
  padding: 8px;
}
#chatlog span.username { font-weight: bold; }

#chat-input {
  height: 40px;
  border: none;
  border-top: 1px solid var(--border);
  padding: 0 12px;
  outline: none;
  width: 100%;
}

/* ================= MOBILE ================= */
@media(max-width:700px) {
  #sidebar {
    width: 100%;
  }
  #chat-area {
    display: none;
  }
  body.show-chat #sidebar {
    display: none;
  }
  body.show-chat #chat-area {
    display: flex;
  }
}
</style>
</head>

<body>
<div id="app">

  <!-- ===== SIDEBAR ===== -->
  <div id="sidebar">
    <div id="sidebar-header">
      Rooms
      <div id="menu">â‹®
        <div id="menu-panel">
          <button id="toggle-theme">Toggle Day / Night</button>
        </div>
      </div>
    </div>
    <div id="roster"></div>
  </div>

  <!-- ===== CHAT ===== -->
  <form id="chatroom">
    <div id="chat-area">
      <div id="chatlog">
        <div id="spacer"></div>
      </div>
      <input id="chat-input">
    </div>
  </form>

</div>

<!-- ===== NAME + ROOM FORMS (UNCHANGED) ===== -->
<form id="name-form">
  <input id="name-input" placeholder="your name">
</form>
<form id="room-form">
  <input id="room-name" placeholder="room name">
  <button id="go-public">Go</button>
  <button id="go-private">Private</button>
</form>

<script>
/* ================= UI ONLY JS ================= */

// 3-dot toggle
const menu = document.getElementById("menu");
const panel = document.getElementById("menu-panel");
menu.onclick = () => panel.style.display = panel.style.display === "block" ? "none" : "block";

// Theme toggle
const btn = document.getElementById("toggle-theme");
if (localStorage.theme === "dark") document.body.classList.add("dark");
btn.onclick = () => {
  document.body.classList.toggle("dark");
  localStorage.theme = document.body.classList.contains("dark") ? "dark" : "light";
};
</script>

<!-- ===== ORIGINAL SCRIPT BELOW (UNTOUCHED) ===== -->
<script>
/*  !!! SELURUH KODE CHAT ASLI LOE DIBIARKAN APA ADANYA !!!
    (dipersingkat di sini demi fokus UI)
*/
</script>
</body>
</html>
